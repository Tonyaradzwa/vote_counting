package vote_counting_java;
import java.util.ArrayList;
import java.util.Random;

public class Vote {

	// your instance variables
	public int votingPopulation;
	public int numberOfCandidates;
	public boolean isValid;
	private String voteReceipt;
	public static ArrayList<String> numberList = new ArrayList<String>(); //instantiate it to an empty list first
	public ArrayList<String> voteReceipts = new ArrayList<String>();
	private int candidateNumber; // is made private so NOONE can meddle with the private number 
	
	// your constructor
	
	/**
	 * This creates a vote object 
	 */
	public Vote(int candidateNumber) {
		// if input is invalid (not within the range) then default to zero always
		if (candidateNumber < 0 || candidateNumber > numberOfCandidates) {
			this.candidateNumber = 0;
			isValid = false;
		} else {
			this.candidateNumber = candidateNumber;	
			isValid = true;
		}
		
		createVoteReceipt();
		
	}
	
	// other useful methods
	/**
	 * This method needs to be public so that 
	 * everyone can verify that the method is indeed 
	 * working as it should
	 * 
	 * Could use a hashtable? to make the search more efficient
	 * since order is not required here
	 */
	public static String createUniqueRandomNumber() {
		Random randInt = new Random();
		int randNum = randInt.nextInt();
		
		// continues to search for a number that has not been used before
		// unfortunately, this needs to be done since we do not want any duplicate strings
		while (numberList.contains(String.valueOf(randNum))) {
			randNum = randInt.nextInt();
		}
		
		numberList.add(String.valueOf(randNum));
		return String.valueOf(randNum);
	}
	/**
	 * This method creates a vote receipt corresponding
	 * to the current vote.
	 * 
	 * The vote receipt is always unique
	 * 
	 */
	public String createVoteReceipt() {
		voteReceipt = String.valueOf(candidateNumber) + String.valueOf(createUniqueRandomNumber());
		System.out.println(voteReceipt);
		voteReceipts.add(voteReceipt);
		
		
		return voteReceipt;
	}
	// toString Method
	public boolean isValidVote() {
		return isValid;
	}
	
	public String toString() {
		return voteReceipt;
	}
	
	// main method to test this class
	public static void main(String args[]) {
		Vote newVote = new Vote(1);
//		Vote newVote1 = new Vote(0);
//		Vote newVote2 = new Vote(2);
//		Vote newVote3 = new Vote(1);
//		Vote newVote4 = new Vote(3);
		System.out.println(newVote);
		
	}

}
